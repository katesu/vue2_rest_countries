webpackJsonp([1],{FxIj:function(t,a){},NHnr:function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=n("7+uW"),s=n("Xxa5"),i=n.n(s),r=n("exGp"),o=n.n(r),c=n("Gu7T"),l=n.n(c),u={name:"Pagination",props:{data:{type:[Array],default:[]}},data:function(){return{dataCopy:[],perPage:25,pageTotal:0,currentPage:0,hasPrevPage:!1,hasNextPage:!1}},methods:{pagination:function(t,a){var n=t.length,e=Math.ceil(n/this.perPage),s=a>e?e:a,i={from:this.perPage*(s-1)+1,end:this.perPage*s};this.pageTotal=e,this.currentPage=s,this.hasPrevPage=e>1&&s-1!=0,this.hasNextPage=s<e,this.$emit("updateDataScope",i)},switchPage:function(t){var a=Number(t.currentTarget.getAttribute("data-page"));this.pagination(this.dataCopy,a)}},watch:{data:function(t){this.dataCopy=[].concat(l()(t)),this.pagination(this.dataCopy,1)}},mounted:function(){}},d={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("nav",{directives:[{name:"show",rawName:"v-show",value:t.data.length,expression:"data.length"}],attrs:{"aria-label":"Page navigation"}},[n("ul",{staticClass:"pagination justify-content-center"},[n("li",{class:["page-item",!t.hasPrevPage&&"disabled"]},[n("a",{staticClass:"page-link",attrs:{"data-page":t.currentPage-1,href:"#"},on:{click:t.switchPage}},[t._v("Previous")])]),t._v(" "),t._l(t.pageTotal,function(a){return n("li",{key:a,class:["page-item",a===t.currentPage&&"active"]},[n("a",{staticClass:"page-link",attrs:{"data-page":a,href:"#"},on:{click:t.switchPage}},[t._v(t._s(a))])])}),t._v(" "),n("li",{class:["page-item",!t.hasNextPage&&"disabled"]},[n("a",{staticClass:"page-link",attrs:{"data-page":t.currentPage+1,href:"#"},on:{click:t.switchPage}},[t._v("Next")])])],2)])},staticRenderFns:[]};var h=n("VU/8")(u,d,!1,function(t){n("qSTe")},"data-v-a7e628f0",null).exports,p=n("d7EF"),f=n.n(p),v=n("W3Iv"),g=n.n(v),_=n("gRE1"),m=n.n(_),C={name:"Modal",data:function(){return{country:{},borders:"N/A"}},computed:{heading:function(){return this.isEmptyData(this.country)?"":this.country.name.official+"("+this.country.name.common+")"},capital:function(){return this.country.capital?m()(this.country.capital).join(", "):"N/A"},tld:function(){return this.country.tld?m()(this.country.tld).join(", "):"N/A"},currencies:function(){return this.country.currencies?g()(this.country.currencies).map(function(t){var a=f()(t,2),n=(a[0],a[1]);return n.name+"("+n.symbol+")"}).join(", "):"N/A"},languages:function(){return this.country.languages?m()(this.country.languages).join(", "):"N/A"}},methods:{isEmptyData:function(t){return $.isEmptyObject(t)},fetchBorders:function(t){var a=this;return o()(i.a.mark(function n(){var e,s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="https://restcountries.com/v3.1/alpha?codes="+t,s={},a.next=4,fetch(e,{}).then(function(t){return t.json()}).then(function(t){s=t.map(function(t){return{name:t.name.common,ccn3:t.ccn3}})}).catch(function(t){throw t});case 4:return a.abrupt("return",s);case 5:case"end":return a.stop()}},n,a)}))()},fetchCountry:function(t){var a=this;return o()(i.a.mark(function n(){var e;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e="https://restcountries.com/v3.1/alpha/"+t,n.next=3,fetch(e,{}).then(function(t){return t.json()}).then(function(t){a.country=t[0]}).catch(function(t){throw t});case 3:case"end":return n.stop()}},n,a)}))()}},watch:{country:function(){var t=this;return o()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.isEmptyData(t.country)||!t.country.borders){a.next=6;break}return a.next=3,t.fetchBorders(t.country.borders.join(","));case 3:t.borders=a.sent,a.next=7;break;case 6:t.borders="N/A";case 7:case"end":return a.stop()}},a,t)}))()}},mounted:function(){}},y={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"modal fade",attrs:{id:"countryDetail","data-backdrop":"static","data-keyboard":"false",tabindex:"-1"}},[n("div",{staticClass:"modal-dialog modal-dialog-scrollable"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title text-left",attrs:{id:"countryDetailLabel"}},[t._v("\n          "+t._s(t.heading)+"\n        ")]),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"modal-body"},[t.isEmptyData(t.country)?t._e():n("div",{staticClass:"row flex-column"},[n("div",{staticClass:"col"},[n("img",{staticClass:"mb-4 img-fluid",attrs:{src:t.country.flags.png,alt:t.country.name.official}})]),t._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 text-left"},[n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("population:\n                  ")]),t._v("\n                  "+t._s(t.country.population)+"\n                ")]),t._v(" "),n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("region: ")]),t._v(t._s(t.country.region)+"\n                ")]),t._v(" "),n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("sub region:\n                  ")]),t._v("\n                  "+t._s(t.country.subregion||"N/A")+"\n                ")]),t._v(" "),n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("latitude: ")]),t._v(t._s(t.country.latlng[0])+"\n                ")]),t._v(" "),n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("longitude: ")]),t._v(t._s(t.country.latlng[1])+"\n                ")])]),t._v(" "),n("div",{staticClass:"col-6 text-left"},[n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("capital:\n                  ")]),t._v("\n                  "+t._s(t.capital)+"\n                ")]),t._v(" "),n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("top level domain:\n                  ")]),t._v("\n                  "+t._s(t.tld)+"\n                ")]),t._v(" "),n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("currencies:\n                  ")]),t._v("\n                  "+t._s(t.currencies)+"\n                ")]),t._v(" "),n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("languages:\n                  ")]),t._v("\n                  "+t._s(t.languages)+"\n                ")])])])]),t._v(" "),n("div",{staticClass:"col text-left"},[n("p",[n("span",{staticClass:"text-capitalize font-weight-bold"},[t._v("\n                border countries:\n              ")]),t._v(" "),"N/A"!==t.borders?t._l(t.borders,function(a,e){return n("a",{key:e,staticClass:"d-inline-block p-1 mr-2 mb-1 alert-info  rounded",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.fetchCountry(a.ccn3)}}},[t._v("\n                  "+t._s(a.name)+"\n                ")])}):[n("span",[t._v(t._s(t.borders))])]],2)])])]),t._v(" "),t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n          Close\n        ")])])}]};var b={name:"DataTable",components:{Modal:n("VU/8")(C,y,!1,function(t){n("Z/RN")},"data-v-331a3305",null).exports},props:{countries:{type:[Array],default:[]},alert:{type:[String],default:""}},data:function(){return{sortBy:null}},computed:{sortClass:function(){var t=null===this.sortBy?this.sortBy:"ascending"===this.sortBy,a=["bi","icon"];return[].concat(a,null===t?["text-black-50","bi-sort-alpha-down"]:["text-body","bi-sort-alpha-"+(t?"down":"up")])}},methods:{showModal:function(t){var a=this;return o()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.$emit("isLoading",!0),n.next=3,a.fetchCountry(t);case 3:a.$refs.modalRef.country=n.sent,$("#countryDetail").modal("show"),a.$emit("isLoading",!1);case 6:case"end":return n.stop()}},n,a)}))()},fetchCountry:function(t){var a=this;return o()(i.a.mark(function n(){var e,s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="https://restcountries.com/v3.1/alpha/"+t,s={},a.next=4,fetch(e,{}).then(function(t){return t.json()}).then(function(t){s=t[0]}).catch(function(t){throw t});case 4:return a.abrupt("return",s);case 5:case"end":return a.stop()}},n,a)}))()},sortData:function(){null===this.sortBy?this.sortBy="ascending":this.sortBy="ascending"===this.sortBy?"descending":"ascending",this.$emit("sortData",this.sortBy)}},watch:{countries:function(t,a){t.length>0&&0===a.length&&this.$emit("isLoading",!1)}}},x={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("table",{staticClass:"table table-striped table-responsive-lg"},[n("thead",[n("tr",{staticClass:"d-flex"},[n("th",{staticClass:"col-2"},[t._v("國旗")]),t._v(" "),n("th",{staticClass:"col-2"},[t._v("\n          國家名稱\n          "),n("a",{staticClass:"p-1",attrs:{href:"#"},on:{click:t.sortData}},[n("i",{class:t.sortClass})])]),t._v(" "),n("th",{staticClass:"col-1"},[t._v("2位國家代碼")]),t._v(" "),n("th",{staticClass:"col-1"},[t._v("3位國家代碼")]),t._v(" "),n("th",{staticClass:"col-2"},[t._v("母語名稱")]),t._v(" "),n("th",{staticClass:"col-2"},[t._v("替代國家名稱")]),t._v(" "),n("th",{staticClass:"col-2"},[t._v("國際電話區號")])])]),t._v(" "),n("tbody",t._l(t.countries,function(a,e){return n("tr",{key:e,staticClass:"d-flex"},[n("td",{staticClass:"col-2 idd"},[t._v("\n          "+t._s(e)+"\n          "),n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.showModal(a.ccn3)}}},[n("img",{staticClass:"flag-img",attrs:{src:a.flags.png,alt:a.name.official}})])]),t._v(" "),n("td",{staticClass:"col-2"},[t._v(t._s(a.name.official))]),t._v(" "),n("td",{staticClass:"col-1"},[t._v(t._s(a.cca2))]),t._v(" "),n("td",{staticClass:"col-1"},[t._v(t._s(a.cca3))]),t._v(" "),n("td",{staticClass:"col-2"},t._l(a.name.nativeName,function(a,e){return n("div",{key:e,staticClass:"text-left mb-2"},[n("span",{staticClass:"alert-dark p-1"},[t._v(t._s(e.toUpperCase()))]),t._v(" "),n("span",[t._v(t._s(""+a.official))])])}),0),t._v(" "),n("td",{staticClass:"col-2"},t._l(a.altSpellings,function(e,s){return n("span",{key:s,class:["d-block",Object.keys(a.altSpellings).length>1&&"border"]},[t._v(t._s(e))])}),0),t._v(" "),n("td",{staticClass:"col-2"},t._l(a.idd.suffixes,function(e,s){return n("span",{key:s,staticClass:"d-block"},[t._v(t._s(""+a.idd.root+e))])}),0)])}),0)]),t._v(" "),n("Modal",{ref:"modalRef"}),t._v(" "),t.alert?n("p",[t._v(t._s(t.alert))]):t._e()],1)},staticRenderFns:[]};var w={name:"App",components:{Pagination:h,DataTable:n("VU/8")(b,x,!1,function(t){n("bwl3")},"data-v-32740e81",null).exports},data:function(){return{countries:[],countriesForDisplay:[],countriesAfterFilter:[],sortBy:null,inputSearch:"",isSearching:!1,isLoading:!1}},computed:{getIsSearching:function(){return this.inputSearch.length>0},dataForPagination:function(){return this.isSearching?this.countriesAfterFilter:this.countries},alertText:function(){return this.isSearching&&!this.countriesAfterFilter.length?"查無此國名，請重新輸入":""}},methods:{fetchCountries:function(){var t=this;return o()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.isLoading=!0,n="https://restcountries.com/v3.1/all",a.next=4,fetch(n,{}).then(function(t){return t.json()}).then(function(a){t.countries=a}).catch(function(t){throw t});case 4:case"end":return a.stop()}},a,t)}))()},sortCountries:function(t){var a=this;this.sortBy=t||this.sortBy,this.dataForPagination.sort(function(t,n){var e=t.name.official.toUpperCase(),s=n.name.official.toUpperCase();return e<s?"ascending"===a.sortBy?-1:1:e>s?"ascending"===a.sortBy?1:-1:0})},getNowPageData:function(t){var a=this.dataForPagination;this.countriesForDisplay=a.filter(function(a,n){return n+1>=t.from&&n+1<=t.end})},searchCountries:function(){if(this.inputSearch.length){var t=this.inputSearch.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),a=new RegExp(t,"gi");this.isSearching=!0,this.countriesAfterFilter=this.countries.filter(function(t){return a.test(t.name.official)})}else this.isSearching=!1;this.sortBy&&this.sortCountries()},clearSearchText:function(){this.isSearching=!1,this.inputSearch="",this.sortBy&&this.sortCountries()},toggleLoading:function(t){this.isLoading=t}},mounted:function(){this.fetchCountries()}},P={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container-lg"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto mr-auto"},[n("div",{staticClass:"input-group mb-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputSearch,expression:"inputSearch"}],staticClass:"form-control searchInput",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.inputSearch},on:{input:[function(a){a.target.composing||(t.inputSearch=a.target.value)},t.searchCountries]}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn searchClearTextBtn",attrs:{type:"button"},on:{click:t.clearSearchText}},[n("i",{staticClass:"bi bi-x-circle-fill"})])])])])]),t._v(" "),n("DataTable",{attrs:{countries:t.countriesForDisplay,alert:t.alertText},on:{sortData:t.sortCountries,isLoading:t.toggleLoading}}),t._v(" "),n("div",{staticClass:"my-5"},[n("pagination",{attrs:{data:t.dataForPagination},on:{updateDataScope:t.getNowPageData}})],1)],1),t._v(" "),t.isLoading?n("div",{staticClass:"loading-modal d-flex justify-content-center align-items-center"},[n("div",{staticClass:"alert alert-light"},[t._v("資料載入中，請稍後")])]):t._e()])},staticRenderFns:[]};var k=n("VU/8")(w,P,!1,function(t){n("ztAT"),n("FxIj")},null,null).exports,S=n("/ocq");e.a.use(S.a);var D=new S.a({routes:[]}),N=n("7t+N"),A=n.n(N);n("Zgw8"),n("K3J8");e.a.config.productionTip=!1,window.$=A.a,new e.a({el:"#app",router:D,components:{App:k},template:"<App/>"})},"Z/RN":function(t,a){},bwl3:function(t,a){},qSTe:function(t,a){},ztAT:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.2becc098a7dc780ad6cb.js.map